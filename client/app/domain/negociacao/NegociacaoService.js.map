{"version":3,"sources":["../../../app-src/domain/negociacao/NegociacaoService.js"],"names":["NegociacaoService","constructor","_http","HttpService","obtemNegociacoesDaSemana","get","then","dados","response","map","obj","Negociacao","Date","data","quantidade","valor","err","Error","obtemNegociacoesDaSemanaAnterior","obtemNegociacoesDaSemanaRetrasada","obtemNegociacoesDoPeriodo","Promise","all","periodo","reduce","acc","concat","sort","a","b","getTime","catch","console","log"],"mappings":";;;;;;AAAO,YAAMA,iBAAN,CAAwB;AAC7BC,sBAAc;AACZ,eAAKC,KAAL,GAAa,IAAIC,WAAJ,EAAb;AACD;AACDC,mCAA2B;AACzB,iBAAO,KAAKF,KAAL,CAAWG,GAAX,CAAe,oBAAf,EAAqCC,IAArC,CACJC,KAAD,IAAW;AACT,kBAAMC,WAAWD,MAAME,GAAN,CAAWC,GAAD,IAAS,IAAIC,UAAJ,CAAe,IAAIC,IAAJ,CAASF,IAAIG,IAAb,CAAf,EAAmCH,IAAII,UAAvC,EAAmDJ,IAAIK,KAAvD,CAAnB,CAAjB;AACA,mBAAOP,QAAP;AACD,WAJI,EAKJQ,GAAD,IAAS;AACP,kBAAM,IAAIC,KAAJ,CAAU,iDAAV,CAAN;AACD,WAPI,CAAP;AASD;AACDC,2CAAmC;AACjC,iBAAO,KAAKhB,KAAL,CAAWG,GAAX,CAAe,sBAAf,EAAuCC,IAAvC,CACJC,KAAD,IAAWA,MAAME,GAAN,CAAWC,GAAD,IAAS,IAAIC,UAAJ,CAAe,IAAIC,IAAJ,CAASF,IAAIG,IAAb,CAAf,EAAmCH,IAAII,UAAvC,EAAmDJ,IAAIK,KAAvD,CAAnB,CADN,EAEJC,GAAD,IAAS;AACP,kBAAM,IAAIC,KAAJ,CAAU,0DAAV,CAAN;AACD,WAJI,CAAP;AAMD;AACDE,4CAAoC;AAClC,iBAAO,KAAKjB,KAAL,CAAWG,GAAX,CAAe,uBAAf,EAAwCC,IAAxC,CACJC,KAAD,IAAWA,MAAME,GAAN,CAAWC,GAAD,IAAS,IAAIC,UAAJ,CAAe,IAAIC,IAAJ,CAASF,IAAIG,IAAb,CAAf,EAAmCH,IAAII,UAAvC,EAAmDJ,IAAIK,KAAvD,CAAnB,CADN,EAEJC,GAAD,IAAS;AACP,kBAAM,IAAIC,KAAJ,CAAU,2DAAV,CAAN;AACD,WAJI,CAAP;AAMD;AACDG,oCAA4B;AAC1B,iBAAOC,QAAQC,GAAR,CAAY,CAAC,KAAKlB,wBAAL,EAAD,EAAkC,KAAKc,gCAAL,EAAlC,EAA2E,KAAKC,iCAAL,EAA3E,CAAZ,EACJb,IADI,CACEiB,OAAD,IAAaA,QAAQC,MAAR,CAAe,CAACC,GAAD,EAAMF,OAAN,KAAkBE,IAAIC,MAAJ,CAAWH,OAAX,CAAjC,EAAsD,EAAtD,EAA0DI,IAA1D,CAA+D,CAACC,CAAD,EAAIC,CAAJ,KAAUD,EAAEf,IAAF,CAAOiB,OAAP,KAAmBD,EAAEhB,IAAF,CAAOiB,OAAP,EAA5F,CADd,EAEJC,KAFI,CAEGf,GAAD,IAAS;AACdgB,oBAAQC,GAAR,CAAYjB,GAAZ;AACA,kBAAM,IAAIC,KAAJ,CAAW,kDAAX,CAAN;AACD,WALI,CAAP;AAMD;AAtC4B","file":"NegociacaoService.js","sourcesContent":["export class NegociacaoService {\r\n  constructor() {\r\n    this._http = new HttpService();\r\n  }\r\n  obtemNegociacoesDaSemana() {\r\n    return this._http.get(\"negociacoes/semana\").then(\r\n      (dados) => {\r\n        const response = dados.map((obj) => new Negociacao(new Date(obj.data), obj.quantidade, obj.valor));\r\n        return response;\r\n      },\r\n      (err) => {\r\n        throw new Error(\"Nao foi possivel obter as negociacoes da semana\");\r\n      }\r\n    );\r\n  }\r\n  obtemNegociacoesDaSemanaAnterior() {\r\n    return this._http.get(\"negociacoes/anterior\").then(\r\n      (dados) => dados.map((obj) => new Negociacao(new Date(obj.data), obj.quantidade, obj.valor)),\r\n      (err) => {\r\n        throw new Error(\"Nao foi possivel obter as negociacoes da semana anterior\");\r\n      }\r\n    );\r\n  }\r\n  obtemNegociacoesDaSemanaRetrasada() {\r\n    return this._http.get(\"negociacoes/retrasada\").then(\r\n      (dados) => dados.map((obj) => new Negociacao(new Date(obj.data), obj.quantidade, obj.valor)),\r\n      (err) => {\r\n        throw new Error(\"Nao foi possivel obter as negociacoes da semana retrasada\");\r\n      }\r\n    );\r\n  }\r\n  obtemNegociacoesDoPeriodo() {\r\n    return Promise.all([this.obtemNegociacoesDaSemana(), this.obtemNegociacoesDaSemanaAnterior(), this.obtemNegociacoesDaSemanaRetrasada()])\r\n      .then((periodo) => periodo.reduce((acc, periodo) => acc.concat(periodo), []).sort((a, b) => a.data.getTime() - b.data.getTime()))\r\n      .catch((err) => {\r\n        console.log(err);\r\n        throw new Error(`Nao foi possivel obter as negociacoes do periodo`);\r\n      });\r\n  }\r\n}\r\n"]}